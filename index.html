<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MindAR Cloudflare</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <style>
    body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: black; }
    #debug-panel {
      position: absolute; top: 0; left: 0; width: 100%; padding: 15px;
      color: yellow; font-family: monospace; font-size: 16px;
      background: rgba(0,0,0,0.8); z-index: 9999; pointer-events: none;
    }
  </style>

  <!-- Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ Cloudflare (Ù…Ø¹Ù…ÙˆÙ„Ø§ ÙÛŒÙ„ØªØ± Ù†ÛŒØ³ØªÙ†Ø¯) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r147/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-three.prod.js"></script>
</head>

<body>
  <div id="debug-panel">Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±...</div>

  <script>
    const debugDiv = document.getElementById('debug-panel');
    function log(msg, color="yellow") {
      debugDiv.innerHTML = `<span style="color:${color}">${msg}</span>`;
    }

    // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ Ø§ÛŒÙ†ØªØ±Ù†Øª ÛŒØ§Ø±ÛŒ Ú©Ø±Ø¯ Ùˆ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ù„ÙˆØ¯ Ø´Ø¯Ù†Ø¯ØŸ
    if (!window.THREE) { 
        log("âŒ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Three.js Ù„ÙˆØ¯ Ù†Ø´Ø¯. Ø§ÛŒÙ†ØªØ±Ù†Øª Ø®ÙˆØ¯ Ø±Ø§ Ú†Ú© Ú©Ù†ÛŒØ¯.", "red");
    } 
    else if (!window.MINDAR) { 
        log("âŒ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ MindAR Ù„ÙˆØ¯ Ù†Ø´Ø¯. ÙÛŒÙ„ØªØ±Ø´Ú©Ù† Ø±Ø§ Ø±ÙˆØ´Ù†/Ø®Ø§Ù…ÙˆØ´ Ú©Ù†ÛŒØ¯.", "red");
    } 
    else { 
        startApp(); 
    }

    async function startApp() {
      try {
        log("ðŸš€ Ø³ÛŒØ³ØªÙ… Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª. Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¯Ø± Ø­Ø§Ù„ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ...");
        
        const mindarThree = new window.MINDAR.IMAGE.MindARThree({
          container: document.body,
          // ÙØ§ÛŒÙ„ ØªØ§Ø±Ú¯Øª Ø¢Ù†Ù„Ø§ÛŒÙ† (Ø±Ø§Ú©ÙˆÙ†)
          imageTargetSrc: "https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.2/examples/image-tracking/assets/card-example/card.mind",
          uiLoading: "no", uiScanning: "yes",
        });

        const { renderer, scene, camera } = mindarThree;

        // Ù†ÙˆØ±
        const light = new THREE.HemisphereLight(0xffffff, 0xbbbbff, 1);
        scene.add(light);

        // Ø§Ù†Ú©Ø±
        const anchor = mindarThree.addAnchor(0);
        
        // Ø³Ø§Ø®Øª Ù…Ú©Ø¹Ø¨ Ù‚Ø±Ù…Ø²
        const geometry = new THREE.BoxGeometry(0.5, 0.5, 0.5);
        const material = new THREE.MeshStandardMaterial({ color: 0xff0000 });
        const cube = new THREE.Mesh(geometry, material);
        cube.position.z = 0.2; 
        anchor.group.add(cube);

        await mindarThree.start();
        
        log("âœ… Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø±ÙˆØ´Ù† Ø´Ø¯! Ú©Ø§Ø±Øª Ø±Ø§Ú©ÙˆÙ† Ø±Ø§ Ù†Ø´Ø§Ù† Ø¯Ù‡ÛŒØ¯.", "#00ff00");

        renderer.setAnimationLoop(() => {
          cube.rotation.x += 0.01;
          cube.rotation.y += 0.01;
          renderer.render(scene, camera);
        });

      } catch (err) {
        log("â›” Ø®Ø·Ø§: " + err.message, "red");
      }
    }
  </script>
</body>
</html>
